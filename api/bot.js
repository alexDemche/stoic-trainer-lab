const { Telegraf } = require('telegraf');

const bot = new Telegraf(process.env.BOT_TOKEN);

// –¢–µ–∫—Å—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥–∏ /help
const helpMessage = `
<b>üßò –©–æ —Ç–∞–∫–µ –ú–µ—Ç–æ–¥ –ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–≥–æ –¥–∏—Ö–∞–Ω–Ω—è?</b>

–¶–µ —Ç–µ—Ö–Ω—ñ–∫–∞ <b>4-4-4-4</b>, –¥–µ –∫–æ–∂–Ω–∞ —Ñ–∞–∑–∞ —Ç—Ä–∏–≤–∞—î —Ä—ñ–≤–Ω–æ <b>4 —Å–µ–∫—É–Ω–¥–∏</b>:
1. <b>–í–¥–∏—Ö</b> (4 —Å–µ–∫) ‚Äî –Ω–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –∫–∏—Å–Ω–µ–º.
2. <b>–ó–∞—Ç—Ä–∏–º–∫–∞</b> (4 —Å–µ–∫) ‚Äî –∑–∞—Å–≤–æ—î–Ω–Ω—è.
3. <b>–í–∏–¥–∏—Ö</b> (4 —Å–µ–∫) ‚Äî —Ä–æ–∑—Å–ª–∞–±–ª–µ–Ω–Ω—è.
4. <b>–ó–∞—Ç—Ä–∏–º–∫–∞</b> (4 —Å–µ–∫) ‚Äî —Ç–æ—á–∫–∞ —Å–ø–æ–∫–æ—é.

<b>üöÄ –Ø–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è?</b>
–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É ¬´–î–∏—Ö–∞—Ç–∏¬ª –Ω–∏–∂—á–µ, –æ–±–µ—Ä—ñ—Ç—å —á–∞—Å —Ç–∞ –ø–æ—Ç—ñ–∫. –°–ª—ñ–¥—É–π—Ç–µ –∑–∞ –∫–æ–ª–æ–º –Ω–∞ –µ–∫—Ä–∞–Ω—ñ.
`;

bot.start((ctx) => ctx.reply('–í—ñ—Ç–∞—é —É Breath Flow! –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É –º–µ–Ω—é, —â–æ–± –ø–æ—á–∞—Ç–∏.'));
bot.help((ctx) => ctx.replyWithHTML(helpMessage));

// –¶–µ –≥–æ–ª–æ–≤–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ –¥–ª—è Vercel Serverless
module.exports = async (req, res) => {
  try {
    if (req.method === 'POST') {
      await bot.handleUpdate(req.body);
    }
    res.status(200).send('OK');
  } catch (error) {
    console.error('Error in Webhook:', error);
    res.status(500).send('Error');
  }
};